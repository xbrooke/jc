<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSN 安装与使用教程</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f9f9fb;
            color: #333;
            line-height: 1.6;
        }

        .container {
            display: flex;
            height: 100%;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .left-section {
            flex: 8.5; /* 左侧占85%的宽度 */
            height: 100%;
        }

        .right-section {
            flex: 1.5; /* 右侧占15%的宽度 */
            background-color: #f1f1f1;
            padding: 20px;
            border-radius: 10px;
            height: 100%;
            display: flex;
            flex-direction: column; /* 让右侧内容垂直排列 */
        }

        .progress-bar {
            width: 100%;
            background-color: #e0e0e0;
            height: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar-inner {
            height: 100%;
            width: 0;
            background-color: #007aff;
            transition: width 0.4s ease; /* 增加动画效果 */
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        button {
            padding: 10px 20px;
            background-color: #007aff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            width: 100%;
            margin-bottom: 10px;
            transition: background-color 0.3s, transform 0.1s ease; /* 添加变色和缩放的过渡效果 */
            position: relative; /* 使动效更平滑 */
        }

        button:hover {
            background-color: rgba(0, 122, 255, 0.8); /* 悬停时稍微变色 */
        }

        button:active {
            transform: scale(0.95); /* 点击时缩小 */
            transition: transform 0.1s ease; /* 缩小效果 */
        }

        button.clicked {
            background-color: #003f7f !important; /* 点击时的颜色 */
            transition: background-color 0.2s; /* 点击时颜色变化的过渡效果 */
        }

        .step-title {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .step-info {
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        /* 新手和老手选项样式 */
        .start-options {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .start-options button {
            width: auto;
            margin: 0 10px;
            padding: 15px 30px;
            font-size: 1rem;
            transition: background-color 0.3s, opacity 0.3s; /* 添加透明度变化的过渡效果 */
        }

        .start-options button:hover {
            background-color: white; /* 鼠标悬停时变为白色 */
            color: #007aff; /* 文字颜色变为深色 */
        }

        .start-options button:active {
            transform: translateY(1px); /* 点击时稍微下沉 */
        }

        .final-step-button {
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- 新手必读/老手跳过 -->
    <div class="start-options" id="startOptions">
        <button id="newUser">👶 新手必读</button>
        <button id="skipUser">🚀 老手跳过</button>
    </div>

    <!-- 左侧教程内容 -->
    <div class="left-section">
        <iframe id="tutorialContent" src="" title="教程内容"></iframe>
    </div>

    <!-- 右侧学习进度 -->
    <div class="right-section">
        <h1>学习进度 📊</h1>

        <div class="step-title" id="stepTitle">当前步骤: 第1步 - OSN安装设置</div>
        <div class="step-info" id="stepInfo">请阅读以上内容以完成本步骤。📝</div>

        <div class="progress-bar">
            <div class="progress-bar-inner" id="progressBar"></div>
        </div>
        
        <div class="button-container">
            <button id="prevStep" style="display:none;">⬅️ 上一步</button>
            <button id="nextStep" style="display:none;">下一步 ➡️</button>
            <button id="addGroupChat" style="display:none;" onclick="window.location.href='https://your-group-chat-link.com';">添加群聊 💬</button>
            <button id="goToAppStore" class="final-step-button" style="display:none;">前往应用商店 🛒</button>
        </div>
    </div>
</div>

<script>
    const nextStepBtn = document.getElementById("nextStep");
    const prevStepBtn = document.getElementById("prevStep");
    const addGroupChatBtn = document.getElementById("addGroupChat");
    const goToAppStoreBtn = document.getElementById("goToAppStore");
    const progressBar = document.getElementById("progressBar");
    const iframe = document.getElementById("tutorialContent");
    const stepTitle = document.getElementById("stepTitle");
    const stepInfo = document.getElementById("stepInfo");
    const startOptions = document.getElementById("startOptions");
    const newUserBtn = document.getElementById("newUser");
    const skipUserBtn = document.getElementById("skipUser");

    let step = 1;
    const totalSteps = 3; // 总步骤数
    let currentProgress = 0; // 当前步骤的进度

    const steps = [
        { title: "第1步 - OSN安装设置", info: "请阅读以上内容以完成本步骤。📝" },
        { title: "第2步 - 应用商店使用教程", info: "请阅读以上内容以完成本步骤。📲" },
        { title: "第3步 - OSN 常见问题Q&A汇总", info: "请阅读以上内容以完成本步骤。❓" }
    ];

    // 更新步骤和进度
    function updateProgress() {
        if (step > 0 && step <= steps.length) {
            stepTitle.textContent = steps[step - 1].title;
            stepInfo.textContent = steps[step - 1].info;
            currentProgress = (step / totalSteps) * 100; // 计算当前进度
            progressBar.style.width = currentProgress + "%"; // 更新进度条
        }

        // 显示或隐藏按钮
        if (step === 1) {
            prevStepBtn.style.display = "none"; // 第一步隐藏上一步按钮
        } else {
            prevStepBtn.style.display = "block"; // 其他步骤显示上一步按钮
        }

        if (step === totalSteps) {
            nextStepBtn.style.display = "none"; // 最后一步隐藏下一步按钮
            addGroupChatBtn.style.display = "block"; // 显示“添加群聊”按钮
            goToAppStoreBtn.style.display = "block"; // 显示“前往应用商店”按钮
        } else {
            nextStepBtn.style.display = "block"; // 显示“下一步”按钮
            addGroupChatBtn.style.display = "none"; // 隐藏“添加群聊”按钮
            goToAppStoreBtn.style.display = "none"; // 隐藏“前往应用商店”按钮
        }
    }

    // 按钮点击事件
    nextStepBtn.addEventListener("click", () => {
        step++;
        if (step <= totalSteps) {
            // 更新iframe内容
            iframe.src = [
                "https://hblog.xbrooke.cn/p/22189", 
                "https://hblog.xbrooke.cn/p/60576", 
                "https://hblog.xbrooke.cn/p/da7"
            ][step - 1];
            updateProgress();
            nextStepBtn.classList.add("clicked");
            setTimeout(() => {
                nextStepBtn.classList.remove("clicked");
            }, 200);
        }
    });

    prevStepBtn.addEventListener("click", () => {
        if (step > 1) {
            step--;
            // 更新iframe内容
            iframe.src = [
                "https://hblog.xbrooke.cn/p/22189", 
                "https://hblog.xbrooke.cn/p/60576", 
                "https://hblog.xbrooke.cn/p/da7"
            ][step - 1];
            updateProgress();
            prevStepBtn.classList.add("clicked");
            setTimeout(() => {
                prevStepBtn.classList.remove("clicked");
            }, 200);
        }
    });

    // 添加群聊按钮的点击事件
    addGroupChatBtn.addEventListener("click", () => {
        window.location.href = "https://wechat.xbrooke.cn"; // 跳转到群聊链接
    });

    // 前往应用商店按钮点击事件
    goToAppStoreBtn.addEventListener("click", () => {
        window.location.href = "http://appstore.xbrooke.cn/"; // 跳转至应用商店
    });

    // 新手必读和老手跳过按钮事件
    newUserBtn.addEventListener("click", () => {
        startOptions.style.display = "none"; // 隐藏选项
        iframe.src = "https://hblog.xbrooke.cn/p/22189"; // 初始步骤
        updateProgress();
        // 添加按钮点击变色效果
        newUserBtn.classList.add("clicked");
        setTimeout(() => {
            newUserBtn.classList.remove("clicked");
        }, 200);
    });

    skipUserBtn.addEventListener("click", () => {
        window.location.href = "http://appstore.xbrooke.cn/"; // 直接跳转至应用商店
        // 添加按钮点击变色效果
        skipUserBtn.classList.add("clicked");
        setTimeout(() => {
            skipUserBtn.classList.remove("clicked");
        }, 200);
    });

    // 初始化进度
    updateProgress();
</script>

</body>
</html>
